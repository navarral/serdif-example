@prefix rdf: 			<http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: 			<http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: 			<http://www.w3.org/2001/XMLSchema#> .
@prefix owl: 			<http://www.w3.org/2002/07/owl#> .

@prefix dct: 			<http://purl.org/dc/terms/> .
@prefix dcat: 			<http://www.w3.org/ns/dcat#> .
@prefix prov:			<http://www.w3.org/ns/prov#> .
@prefix prvt:			<http://purl.org/net/provenance/ns#> .
@prefix foaf:			<http://xmlns.com/foaf/0.1/> .
@prefix sp:				<http://spinrdf.org/spin#> .

@prefix qb:  			<http://purl.org/linked-data/cube#> .

@prefix sdmx-concept:  	<http://purl.org/linked-data/sdmx/2009/concept#> .
@prefix sdmx-dimension: <http://purl.org/linked-data/sdmx/2009/dimension#> .
@prefix sdmx-attribute: <http://purl.org/linked-data/sdmx/2009/attribute#> .
@prefix sdmx-measure:   <http://purl.org/linked-data/sdmx/2009/measure#> .
@prefix sdmx-metadata:  <http://purl.org/linked-data/sdmx/2009/metadata#> .
@prefix sdmx-code:      <http://purl.org/linked-data/sdmx/2009/code#> .
@prefix sdmx-subject:   <http://purl.org/linked-data/sdmx/2009/subject#> .

@prefix geo: 			<http://www.opengis.net/ont/geosparql#> .
@prefix qudt: 			<http://qudt.org/schema/qudt#> .
@prefix unit: 			<http://qudt.org/vocab/unit/> .
@prefix time:			<http://www.w3.org/2006/time#> .
@prefix event: 			<http://purl.org/NET/c4dm/event.owl#> .
@prefix geohive-county: <http://data.geohive.ie/resource/county/> .
@prefix geohive-county-geo:		<http://data.geohive.ie/pathpage/geo:hasGeometry/county/> .

@prefix dpv:			<http://www.w3.org/ns/dpv#> .
@prefix dpv-gdpr: 		<http://www.w3.org/ns/dpv-gdpr#> .
@prefix obo:			<http://purl.obolibrary.org/obo/> .
@prefix odrl: 			<http://www.w3.org/ns/odrl/2/> .

@prefix eg:      		<http://example.org/ns#> .


# -- Data Set ----------------------------------------------------------

eg:dataset-eea-{{data.version}}-{{data.stCode}} 
	a 							qb:DataSet, geo:Feature, prov:Entity, dcat:Dataset ;
    dct:title 					"European Environment Agency (EEA) station {{data.stCode}} air quality data"@en ;
    rdfs:label      			"European Environment Agency (EEA) station {{data.stCode}} air quality data"@en ;   
    rdfs:comment    			"The dataset describes historical observation air quality data for European Environment Agency (EEA) station {{data.stCode}} in IE."@en ;
    dct:description 			"The dataset describes historical observation air quality data for European Environment Agency (EEA) station {{data.stCode}} in IE."@en ;
    dct:identifier 				"https://doi.org/10.5281/zenodo.5544257"^^xsd:anyURI ;
    dct:hasVersion				"{{data.version}}" ;
    dct:issued      			"{{data.versionDateTime}}"^^xsd:dateTime ;
    dct:publisher   			<https://www.eea.europa.eu/> ;
	dcat:distribution 			eg:dataset-eea-{{data.version}}-{{data.stCode}}-dist ;
	dct:license 				<https://creativecommons.org/licenses/by/2.5/dk/deed.en_GB> ;
	
	# -- Themes describing the dataset ---------------------------------
    dcat:theme
        sdmx-subject:3.2 ,      					      # Regional and small area statistics
        sdmx-subject:3.1 ,      					  	  # Environment
        <https://www.wikidata.org/entity/Q186588>		, # Time series
        <https://www.wikidata.org/entity/Q58734>		, # Pollution 
        <https://www.wikidata.org/entity/Q56245086>		, # Air Quality
        <https://www.wikidata.org/entity/Q27>			; # Republic of Ireland      
    
    # -- External data sets used to construct this data set 
    dct:hasPart 				<{{data.downloadFileUrl}}> ;
	
	# -- Spatial descriptors -------------------------------------------
	dct:Location 				eg:dataset-eea-{{data.version}}-{{data.stCode}}-geo ;   # Point Geometry within the Republic of Ireland
	
	# -- Temporal descriptors ------------------------------------------
	dcat:temporalResolution 	"{{data.timeUnit}}"^^xsd:duration ;
	dct:temporal 				eg:dataset-eea-{{data.version}}-{{data.stCode}}-temporal-{{data.yearDataset}} ;
	
	# -- RDF Data cube structure ---------------------------------------
	qb:structure 				eg:dataset-eea-{{data.version}}-{{data.stCode}}-dsd ;
	
	# -- Activity that constructed the data set ------------------------
    prov:wasGeneratedBy 		eg:dataset-eea-{{data.version}}-IE{{data.stCode}}-map-{{data.yearDataset}} ;
    
	# -- Dataset use ---------------------------------------------------
	rdfs:about 					eg:eea-DataUse ;
.

# -- Distribution ------------------------------------------------------

eg:dataset-eea-{{data.version}}-{{data.stCode}}-dist 
	a 							dcat:Distribution ;
	dct:license 				<https://creativecommons.org/licenses/by/2.5/dk/deed.en_GB> ;
	dct:title 					"European Environment Agency (EEA) station {{data.stCode}} air quality data as an RDF Data Cube"@en ;
    rdfs:label      			"European Environment Agency (EEA) station {{data.stCode}} air quality data as an RDF Data Cube"@en ;
	rdfs:comment    			"The dataset describes historical observation air quality data for European Environment Agency (EEA) station {{data.stCode}} in IE as an RDF Data Cube."@en ;
    dct:description 			"The dataset describes historical observation air quality data for European Environment Agency (EEA) station {{data.stCode}} in IE as an RDF Data Cube."@en ;
	dcat:downloadURL 			<https://doi.org/10.5281/zenodo.5544257> ;
	dcat:mediaType 				<https://www.iana.org/assignments/media-types/text/turtle> ;
	dcat:byteSize 				"{{data.bitSize}}"^^xsd:float ;
	dcat:temporalResolution 	"{{data.timeUnit}}"^^xsd:duration ;
.

# -- Agents ------------------------------------------------------------

<https://orcid.org/0000-0002-2336-753X> a prov:Person, prov:Agent .

<https://www.eea.europa.eu/> a dct:Agent .

# -- Period of time included in the data set ---------------------------

eg:dataset-eea-{{data.version}}-{{data.stCode}}-temporal-{{data.yearDataset}}
	a 						dct:PeriodOfTime ;
	rdfs:comment    		"Time interval defined by the earliest and most recent dates available at the dataset."@en ;
	dcat:startDate 			"{{data.startDate}}"^^xsd:dateTime ;
	dcat:endDate   			"{{data.endDate}}"^^xsd:dateTime ;
.

# -- Station geometry --------------------------------------------------

eg:dataset-eea-{{data.version}}-{{data.stCode}}-geo 
	a 						geo:Geometry ;
	geo:asWKT 				"POINT({{data.lon}} {{data.lat}})"^^geo:wktLiteral ;
	geo:alt					"{{data.altitude}}"^^xsd:float ;
.

# -- Data provenance and lineage ---------------------------------------

eg:dataset-eea-{{data.version}}-{{data.stCode}}-map-{{data.yearDataset}}
	a 						prov:Activity ;
	prov:used 				<{{data.downloadFileUrl}}> ,
							<dataset-eea-{{data.version}}-{{data.stCode}}-{{data.yearDataset}}-mapping.ttl> ;
	prov:wasAssociatedWith 	<https://orcid.org/0000-0002-2336-753X>  ;
	rdfs:comment 			"The activity describes the semanatic uplift of air quality time series observation dataset from CSV to RDF using a R2RML mapping. The mapping follows the RDF Data Cube structure for statistical data"@en ;
.

# -- Dataset use -------------------------------------------------------
eg:eea-DataUse	
	a 							obo:DUO:0000004 ;
	rdfs:comment				"Legal notices regarding the EEA's website."@en ;
	rdfs:seeAlso				"https://www.eea.europa.eu/legal/"^^xsd:anyURI ;
.
# -- Data structure definition -----------------------------------------

eg:dataset-eea-{{data.version}}-{{data.stCode}}-dsd
        a             qb:DataStructureDefinition ;
        rdfs:comment  "RDF Data Cube data structure definition for historical air quality observations (multi-measure approach)"@en ;
		qb:component
		
        # The dimensions
			[ 	a	qb:ComponentSpecification ;
				qb:dimension sdmx-dimension:timePeriod;		
				qb:order "1"^^xsd:int ] ;
				
		# The measures
        qb:component  [ a	qb:ComponentSpecification ;		qb:measure  eg:has{{data.eeaVar}} ] ;
        
        # slices
		qb:sliceKey eg:sliceByTime ;
 .

eg:sliceByTime a qb:SliceKey;
    rdfs:label "Slice by time"@en;
    rdfs:comment "Slice by time fixing area"@en;
    qb:componentProperty sdmx-dimension:refArea, sdmx-dimension:timePeriod ;
    .

# -- Dimensions and measures  ------------------------------------------

# TIME_PERIOD
sdmx-dimension:timePeriod 
	a 					qb:DimensionProperty, rdf:Property ;
    rdfs:range 			rdfs:Resource;
    qb:concept 			sdmx-concept:timePeriod ;
    rdfs:label 			"Time Period"@en ;
    rdfs:comment 		"The period of time or point in time to which the measured observation refers."@en ;
    rdfs:isDefinedBy 	<https://sdmx.org/wp-content/uploads/01_sdmx_cog_annex_1_cdc_2009.pdf> ;
.

# {{data.eeaVar_nameAndUnitUpper}}
eg:has{{data.eeaVar}}
	a              		owl:DatatypeProperty , qb:MeasureProperty ;
	rdfs:label     		"{{data.eeaVar}}"@en ;
	rdfs:comment   		"{{data.eeaVar_nameAndUnit}}" ;
	rdfs:subPropertyOf  sdmx-measure:obsValue ;
	rdfs:range     		xsd:float ;
	unit:abbreviation 	{{data.eeaVar_Unit}} ;
	rdfs:seeAlso		<{{data.eeaVar_eeaInfo}}> ;
.


# -- Observations ------------------------------------------------------
